{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/calummelling/Desktop/redditscraper/frontend/src/lib/supabase.ts"],"sourcesContent":["import { createClient, SupabaseClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || \"https://placeholder.supabase.co\";\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \"placeholder_key\";\n\n// Lazy initialization to avoid build-time errors\nlet _supabase: SupabaseClient | null = null;\n\nexport function getSupabase(): SupabaseClient {\n  if (!_supabase) {\n    _supabase = createClient(supabaseUrl, supabaseAnonKey);\n  }\n  return _supabase;\n}\n\n// For convenience, export a getter that creates the client on first access\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\n// Types based on our database schema\nexport interface RedditLead {\n  id: string;\n  reddit_username: string;\n  reddit_id: string | null;\n  karma: number;\n  comment_karma: number;\n  account_created_at: string | null;\n  avatar_url: string | null;\n  banner_url: string | null;\n  profile_url: string;\n  total_posts: number;\n  posting_frequency: number | null;\n  first_seen: string;\n  last_seen: string;\n  extracted_links: string[];\n  bio: string | null;\n  status: \"pending\" | \"approved\" | \"rejected\" | \"superliked\" | \"contacted\";\n  created_at: string;\n  updated_at: string;\n  reddit_posts?: RedditPost[];\n}\n\nexport interface RedditPost {\n  id: string;\n  reddit_post_id: string;\n  lead_id: string;\n  subreddit_id: string | null;\n  subreddit_name: string | null;\n  title: string | null;\n  content: string | null;\n  url: string | null;\n  permalink: string | null;\n  media_urls: string[];\n  upvotes: number;\n  upvote_ratio: number | null;\n  num_comments: number;\n  is_nsfw: boolean;\n  post_created_at: string | null;\n  created_at: string;\n}\n\nexport interface Stats {\n  total_leads: number;\n  total_posts: number;\n  total_subreddits: number;\n  pending_leads: number;\n  approved_leads: number;\n  rejected_leads: number;\n  superliked_leads: number;\n}\n\n// API functions\nexport async function getPendingLeads(limit = 50, offset = 0): Promise<RedditLead[]> {\n  const { data, error } = await supabase\n    .from(\"reddit_leads\")\n    .select(\"*, reddit_posts(*)\")\n    .eq(\"status\", \"pending\")\n    .order(\"karma\", { ascending: false })\n    .range(offset, offset + limit - 1);\n\n  if (error) {\n    console.error(\"Error fetching leads:\", error);\n    return [];\n  }\n\n  return data || [];\n}\n\nexport async function getLeadsByStatus(\n  status: string,\n  limit = 50,\n  offset = 0\n): Promise<RedditLead[]> {\n  const { data, error } = await supabase\n    .from(\"reddit_leads\")\n    .select(\"*, reddit_posts(*)\")\n    .eq(\"status\", status)\n    .order(\"updated_at\", { ascending: false })\n    .range(offset, offset + limit - 1);\n\n  if (error) {\n    console.error(\"Error fetching leads:\", error);\n    return [];\n  }\n\n  return data || [];\n}\n\nexport async function updateLeadStatus(\n  leadId: string,\n  status: \"approved\" | \"rejected\" | \"superliked\",\n  notes?: string\n): Promise<boolean> {\n  const { error: updateError } = await supabase\n    .from(\"reddit_leads\")\n    .update({ status, updated_at: new Date().toISOString() })\n    .eq(\"id\", leadId);\n\n  if (updateError) {\n    console.error(\"Error updating lead status:\", updateError);\n    return false;\n  }\n\n  // Create decision record\n  const { error: decisionError } = await supabase.from(\"lead_decisions\").insert({\n    lead_id: leadId,\n    decision: status,\n    notes,\n  });\n\n  if (decisionError) {\n    console.error(\"Error creating decision record:\", decisionError);\n  }\n\n  return true;\n}\n\nexport async function getStats(): Promise<Stats> {\n  const { data: leads } = await supabase\n    .from(\"reddit_leads\")\n    .select(\"id, status\");\n\n  const { count: postsCount } = await supabase\n    .from(\"reddit_posts\")\n    .select(\"*\", { count: \"exact\", head: true });\n\n  const { count: subredditsCount } = await supabase\n    .from(\"subreddits\")\n    .select(\"*\", { count: \"exact\", head: true });\n\n  const leadsData = leads || [];\n\n  return {\n    total_leads: leadsData.length,\n    total_posts: postsCount || 0,\n    total_subreddits: subredditsCount || 0,\n    pending_leads: leadsData.filter((l) => l.status === \"pending\").length,\n    approved_leads: leadsData.filter((l) => l.status === \"approved\").length,\n    rejected_leads: leadsData.filter((l) => l.status === \"rejected\").length,\n    superliked_leads: leadsData.filter((l) => l.status === \"superliked\").length,\n  };\n}\n\n// Subreddit types and functions\nexport interface Subreddit {\n  id: string;\n  name: string;\n  display_name: string;\n  subscribers: number;\n  is_nsfw: boolean;\n}\n\nexport async function getSubreddits(): Promise<Subreddit[]> {\n  const { data, error } = await supabase\n    .from(\"subreddits\")\n    .select(\"*\")\n    .order(\"name\", { ascending: true });\n\n  if (error) {\n    console.error(\"Error fetching subreddits:\", error);\n    return [];\n  }\n\n  return data || [];\n}\n\nexport async function getLeadsBySubreddit(\n  subredditId: string,\n  status: string = \"pending\",\n  limit = 50,\n  offset = 0\n): Promise<RedditLead[]> {\n  // Get lead IDs that have posts in this subreddit\n  const { data: postData, error: postError } = await supabase\n    .from(\"reddit_posts\")\n    .select(\"lead_id\")\n    .eq(\"subreddit_id\", subredditId);\n\n  if (postError || !postData) {\n    console.error(\"Error fetching posts:\", postError);\n    return [];\n  }\n\n  const leadIds = [...new Set(postData.map((p) => p.lead_id))];\n\n  if (leadIds.length === 0) {\n    return [];\n  }\n\n  const { data, error } = await supabase\n    .from(\"reddit_leads\")\n    .select(\"*, reddit_posts(*)\")\n    .in(\"id\", leadIds)\n    .eq(\"status\", status)\n    .order(\"karma\", { ascending: false })\n    .range(offset, offset + limit - 1);\n\n  if (error) {\n    console.error(\"Error fetching leads:\", error);\n    return [];\n  }\n\n  return data || [];\n}\n\nexport async function getSubredditStats(subredditId: string): Promise<{\n  pending: number;\n  approved: number;\n  rejected: number;\n  superliked: number;\n}> {\n  // Get lead IDs that have posts in this subreddit\n  const { data: postData } = await supabase\n    .from(\"reddit_posts\")\n    .select(\"lead_id\")\n    .eq(\"subreddit_id\", subredditId);\n\n  const leadIds = [...new Set((postData || []).map((p) => p.lead_id))];\n\n  if (leadIds.length === 0) {\n    return { pending: 0, approved: 0, rejected: 0, superliked: 0 };\n  }\n\n  const { data: leads } = await supabase\n    .from(\"reddit_leads\")\n    .select(\"status\")\n    .in(\"id\", leadIds);\n\n  const leadsData = leads || [];\n\n  return {\n    pending: leadsData.filter((l) => l.status === \"pending\").length,\n    approved: leadsData.filter((l) => l.status === \"approved\").length,\n    rejected: leadsData.filter((l) => l.status === \"rejected\").length,\n    superliked: leadsData.filter((l) => l.status === \"superliked\").length,\n  };\n}\n\n// =============================================================================\n// SEARCH KEYWORDS & SCRAPE JOBS\n// =============================================================================\n\nexport interface SearchKeyword {\n  id: string;\n  keyword: string;\n  is_active: boolean;\n  priority: number;\n  times_scraped: number;\n  last_scraped_at: string | null;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface ScrapeJob {\n  id: string;\n  keyword_id: string | null;\n  keyword: string;\n  status: \"pending\" | \"processing\" | \"completed\" | \"failed\";\n  priority: number;\n  subreddits_found: number;\n  leads_found: number;\n  posts_found: number;\n  error_message: string | null;\n  started_at: string | null;\n  completed_at: string | null;\n  created_at: string;\n}\n\nexport async function getSearchKeywords(): Promise<SearchKeyword[]> {\n  const { data, error } = await supabase\n    .from(\"search_keywords\")\n    .select(\"*\")\n    .order(\"priority\", { ascending: false });\n\n  if (error) {\n    console.error(\"Error fetching keywords:\", error);\n    return [];\n  }\n\n  return data || [];\n}\n\nexport async function addSearchKeyword(keyword: string, priority: number = 1000): Promise<SearchKeyword | null> {\n  // Check if keyword already exists\n  const { data: existing } = await supabase\n    .from(\"search_keywords\")\n    .select(\"*\")\n    .eq(\"keyword\", keyword.toLowerCase().trim())\n    .single();\n\n  if (existing) {\n    // Update priority if it exists\n    const { data, error } = await supabase\n      .from(\"search_keywords\")\n      .update({ priority, is_active: true, updated_at: new Date().toISOString() })\n      .eq(\"id\", existing.id)\n      .select()\n      .single();\n\n    if (error) {\n      console.error(\"Error updating keyword:\", error);\n      return null;\n    }\n    return data;\n  }\n\n  // Insert new keyword\n  const { data, error } = await supabase\n    .from(\"search_keywords\")\n    .insert({\n      keyword: keyword.toLowerCase().trim(),\n      priority,\n      is_active: true,\n    })\n    .select()\n    .single();\n\n  if (error) {\n    console.error(\"Error adding keyword:\", error);\n    return null;\n  }\n\n  return data;\n}\n\nexport async function updateKeywordPriority(keywordId: string, priority: number): Promise<boolean> {\n  const { error } = await supabase\n    .from(\"search_keywords\")\n    .update({ priority, updated_at: new Date().toISOString() })\n    .eq(\"id\", keywordId);\n\n  if (error) {\n    console.error(\"Error updating priority:\", error);\n    return false;\n  }\n  return true;\n}\n\nexport async function toggleKeywordActive(keywordId: string, isActive: boolean): Promise<boolean> {\n  const { error } = await supabase\n    .from(\"search_keywords\")\n    .update({ is_active: isActive, updated_at: new Date().toISOString() })\n    .eq(\"id\", keywordId);\n\n  if (error) {\n    console.error(\"Error toggling keyword:\", error);\n    return false;\n  }\n  return true;\n}\n\nexport async function deleteKeyword(keywordId: string): Promise<boolean> {\n  const { error } = await supabase\n    .from(\"search_keywords\")\n    .delete()\n    .eq(\"id\", keywordId);\n\n  if (error) {\n    console.error(\"Error deleting keyword:\", error);\n    return false;\n  }\n  return true;\n}\n\nexport async function getScrapeJobs(limit: number = 20): Promise<ScrapeJob[]> {\n  const { data, error } = await supabase\n    .from(\"scrape_jobs\")\n    .select(\"*\")\n    .order(\"created_at\", { ascending: false })\n    .limit(limit);\n\n  if (error) {\n    console.error(\"Error fetching scrape jobs:\", error);\n    return [];\n  }\n\n  return data || [];\n}\n\nexport async function queueScrapeJob(keyword: string, keywordId?: string, priority: number = 1000): Promise<ScrapeJob | null> {\n  const { data, error } = await supabase\n    .from(\"scrape_jobs\")\n    .insert({\n      keyword: keyword.toLowerCase().trim(),\n      keyword_id: keywordId || null,\n      priority,\n      status: \"pending\",\n    })\n    .select()\n    .single();\n\n  if (error) {\n    console.error(\"Error queuing scrape job:\", error);\n    return null;\n  }\n\n  return data;\n}\n\nexport async function addKeywordAndScrape(keyword: string): Promise<{\n  keyword: SearchKeyword | null;\n  job: ScrapeJob | null;\n}> {\n  // Add keyword with high priority\n  const savedKeyword = await addSearchKeyword(keyword, 1000);\n  \n  if (!savedKeyword) {\n    return { keyword: null, job: null };\n  }\n\n  // Queue a scrape job for this keyword\n  const job = await queueScrapeJob(keyword, savedKeyword.id, 1000);\n\n  return { keyword: savedKeyword, job };\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///Users/calummelling/Desktop/redditscraper/frontend/src/components/SwipeCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { motion, useMotionValue, useTransform, PanInfo, AnimatePresence } from \"framer-motion\";\nimport { X, Heart, ExternalLink, ChevronLeft, ChevronRight, TrendingUp, Clock, FileText, Star, ThumbsUp } from \"lucide-react\";\nimport type { RedditLead } from \"@/lib/supabase\";\n\ninterface SwipeCardProps {\n  lead: RedditLead;\n  onSwipe: (direction: \"left\" | \"right\") => void;\n  onSuperLike?: () => void;\n  isActive: boolean;\n}\n\nexport function SwipeCard({ lead, onSwipe, onSuperLike, isActive }: SwipeCardProps) {\n  const [exitDirection, setExitDirection] = useState<\"left\" | \"right\" | \"up\" | null>(null);\n  const [lightboxIndex, setLightboxIndex] = useState<number | null>(null);\n  const x = useMotionValue(0);\n  const rotate = useTransform(x, [-300, 0, 300], [-15, 0, 15]);\n  const opacity = useTransform(x, [-300, -100, 0, 100, 300], [0.5, 1, 1, 1, 0.5]);\n\n  // Overlay indicators\n  const rejectOpacity = useTransform(x, [-150, 0], [1, 0]);\n  const approveOpacity = useTransform(x, [0, 150], [0, 1]);\n\n  // Extract and analyze links - check bio, extracted_links, and post content\n  const linkAnalysis = useMemo(() => {\n    const links = [...(lead.extracted_links || [])];\n    const urlRegex = /https?:\\/\\/[^\\s<>\"{}|\\\\^`\\[\\]]+/gi;\n    const ofUsernameRegex = /onlyfans\\.com\\/[\\w\\-.]+/gi;\n    \n    const extractUrls = (text: string) => {\n      if (!text) return;\n      const urlMatches = text.match(urlRegex) || [];\n      urlMatches.forEach(l => {\n        if (!links.includes(l)) links.push(l);\n      });\n      const ofMatches = text.match(ofUsernameRegex) || [];\n      ofMatches.forEach(m => {\n        const fullUrl = m.startsWith('http') ? m : `https://${m}`;\n        if (!links.includes(fullUrl)) links.push(fullUrl);\n      });\n    };\n    \n    extractUrls(lead.bio || '');\n    \n    if (lead.reddit_posts) {\n      lead.reddit_posts.forEach(post => {\n        extractUrls(post.title || '');\n        extractUrls(post.content || '');\n      });\n    }\n    \n    let ofLinks = links.filter(l => l.toLowerCase().includes(\"onlyfans.com\"));\n    const bioMentionsOF = lead.bio && /\\b(onlyfans|only\\s*fans|\\bof\\b)/i.test(lead.bio);\n    const likelyOFLink = `https://onlyfans.com/${lead.reddit_username.toLowerCase()}`;\n    \n    if (ofLinks.length === 0 && bioMentionsOF) {\n      ofLinks = [likelyOFLink];\n    }\n    \n    const hasOF = ofLinks.length > 0;\n    const hasTracking = ofLinks.some(l => /\\/c\\d+/i.test(l));\n    const bioIndicatesOF = bioMentionsOF && ofLinks[0] === likelyOFLink;\n    const linktreeLinks = links.filter(l => \n      /linktr\\.ee|beacons\\.ai|allmylinks|solo\\.to|linkr\\.bio/i.test(l)\n    );\n    const hasLinktree = linktreeLinks.length > 0;\n    const socialLinks = links.filter(l =>\n      /instagram|twitter|x\\.com|tiktok|snapchat|telegram/i.test(l)\n    );\n    const hasSocials = socialLinks.length > 0;\n    \n    return { ofLinks, hasOF, hasTracking, linktreeLinks, hasLinktree, socialLinks, hasSocials, allLinks: links, bioIndicatesOF };\n  }, [lead.extracted_links, lead.bio, lead.reddit_posts, lead.reddit_username]);\n\n  // Get unique media for the grid\n  const mediaUrls = useMemo(() => {\n    if (!lead.reddit_posts) return [];\n    const allUrls = lead.reddit_posts.flatMap(p => p.media_urls || []);\n    const unique = [...new Set(allUrls)];\n    for (let i = unique.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [unique[i], unique[j]] = [unique[j], unique[i]];\n    }\n    return unique.slice(0, 6);\n  }, [lead.reddit_posts]);\n\n  // Stats calculations\n  const stats = useMemo(() => {\n    const accountDays = lead.account_created_at \n      ? Math.floor((Date.now() - new Date(lead.account_created_at).getTime()) / (1000 * 60 * 60 * 24))\n      : 0;\n    \n    let accountAge = \"Unknown\";\n    if (accountDays > 0) {\n      if (accountDays < 30) accountAge = `${accountDays}d`;\n      else if (accountDays < 365) accountAge = `${Math.floor(accountDays / 30)}mo`;\n      else accountAge = `${(accountDays / 365).toFixed(1)}yr`;\n    }\n    \n    // Use posting_frequency from scraper if available, otherwise calculate\n    let postsPerDay: string;\n    if (lead.posting_frequency !== null && lead.posting_frequency !== undefined) {\n      postsPerDay = Number(lead.posting_frequency).toFixed(2);\n    } else if (accountDays > 0 && lead.total_posts > 0) {\n      postsPerDay = (lead.total_posts / accountDays).toFixed(2);\n    } else {\n      postsPerDay = \"‚Äî\";\n    }\n    \n    // Calculate average upvotes from scraped posts\n    let avgUpvotes: string;\n    if (lead.reddit_posts && lead.reddit_posts.length > 0) {\n      const totalUpvotes = lead.reddit_posts.reduce((sum, post) => sum + (post.upvotes || 0), 0);\n      const avg = totalUpvotes / lead.reddit_posts.length;\n      if (avg >= 1000) {\n        avgUpvotes = `${(avg / 1000).toFixed(1)}k`;\n      } else {\n        avgUpvotes = Math.round(avg).toString();\n      }\n    } else {\n      avgUpvotes = \"‚Äî\";\n    }\n    \n    return { accountAge, accountDays, postsPerDay, avgUpvotes };\n  }, [lead.account_created_at, lead.total_posts, lead.posting_frequency, lead.reddit_posts]);\n\n  const handleDragEnd = (_: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => {\n    const threshold = 150;\n    if (info.offset.x > threshold) {\n      setExitDirection(\"right\");\n      onSwipe(\"right\");\n    } else if (info.offset.x < -threshold) {\n      setExitDirection(\"left\");\n      onSwipe(\"left\");\n    }\n  };\n\n  const handleButtonSwipe = (direction: \"left\" | \"right\") => {\n    setExitDirection(direction);\n    onSwipe(direction);\n  };\n\n  const handleSuperLike = () => {\n    if (onSuperLike) {\n      setExitDirection(\"up\");\n      onSuperLike();\n    }\n  };\n\n  // Keyboard controls\n  useEffect(() => {\n    if (!isActive) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Lightbox navigation\n      if (lightboxIndex !== null) {\n        if (e.key === \"Escape\") {\n          setLightboxIndex(null);\n        } else if (e.key === \"ArrowLeft\" && lightboxIndex > 0) {\n          setLightboxIndex(lightboxIndex - 1);\n        } else if (e.key === \"ArrowRight\" && lightboxIndex < mediaUrls.length - 1) {\n          setLightboxIndex(lightboxIndex + 1);\n        }\n        return;\n      }\n      \n      // Card swipe controls\n      if (e.key === \"ArrowLeft\" || e.key === \"a\") {\n        handleButtonSwipe(\"left\");\n      } else if (e.key === \"ArrowRight\" || e.key === \"d\") {\n        handleButtonSwipe(\"right\");\n      } else if (e.key === \"ArrowUp\" || e.key === \"w\" || e.key === \"s\") {\n        handleSuperLike();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [isActive, lightboxIndex, mediaUrls.length, onSuperLike]);\n\n  const exitVariants = {\n    left: { x: -500, rotate: -30, opacity: 0, transition: { duration: 0.4, ease: \"easeOut\" } },\n    right: { x: 500, rotate: 30, opacity: 0, transition: { duration: 0.4, ease: \"easeOut\" } },\n    up: { y: -500, scale: 1.1, opacity: 0, transition: { duration: 0.4, ease: \"easeOut\" } },\n  };\n\n  return (\n    <>\n      <motion.div\n        className=\"absolute inset-0 flex items-center justify-center\"\n        initial={{ scale: 0.95, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={exitDirection ? exitVariants[exitDirection] : { opacity: 0, scale: 0.8 }}\n        transition={{ duration: 0.3 }}\n      >\n        <motion.div\n          className=\"relative w-full max-w-xl bg-card rounded-2xl card-shadow overflow-hidden cursor-grab active:cursor-grabbing\"\n          style={{ x, rotate, opacity }}\n          drag={isActive ? \"x\" : false}\n          dragConstraints={{ left: 0, right: 0 }}\n          dragElastic={0.7}\n          onDragEnd={handleDragEnd}\n          whileTap={{ scale: 0.98 }}\n        >\n          {/* Swipe indicators */}\n          <motion.div\n            className=\"absolute top-4 left-4 z-20 px-4 py-2 bg-destructive/90 rounded-lg text-white font-bold text-lg rotate-[-15deg] border-2 border-white\"\n            style={{ opacity: rejectOpacity }}\n          >\n            NOPE\n          </motion.div>\n          <motion.div\n            className=\"absolute top-4 right-4 z-20 px-4 py-2 bg-success/90 rounded-lg text-white font-bold text-lg rotate-[15deg] border-2 border-white\"\n            style={{ opacity: approveOpacity }}\n          >\n            YES!\n          </motion.div>\n\n          {/* Scrollable content area */}\n          <div \n            className=\"max-h-[80vh] overflow-y-auto\"\n            onPointerDownCapture={(e) => e.stopPropagation()}\n          >\n            {/* Large Media Grid - 2 columns for bigger thumbnails */}\n            {mediaUrls.length > 0 && (\n              <div className=\"p-2 bg-black/40\">\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {mediaUrls.slice(0, 4).map((url, i) => (\n                    <button\n                      key={i}\n                      onClick={() => setLightboxIndex(i)}\n                      className=\"relative aspect-[4/5] rounded-xl overflow-hidden bg-muted group cursor-pointer\"\n                    >\n                      <img\n                        src={url}\n                        alt={`Preview ${i + 1}`}\n                        className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                        loading=\"lazy\"\n                      />\n                      <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center\">\n                        <span className=\"text-white/0 group-hover:text-white/90 text-sm font-medium transition-colors\">\n                          Click to preview\n                        </span>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n                {mediaUrls.length > 4 && (\n                  <div className=\"text-center text-xs text-muted-foreground mt-2\">\n                    +{mediaUrls.length - 4} more images\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* No media fallback */}\n            {mediaUrls.length === 0 && (\n              <div className=\"h-32 bg-gradient-to-br from-primary/20 via-accent/20 to-purple-500/20 flex items-center justify-center\">\n                <span className=\"text-muted-foreground text-sm\">No media available</span>\n              </div>\n            )}\n\n            {/* Stats Bar - Prominent */}\n            <div className=\"grid grid-cols-4 gap-1 p-3 bg-gradient-to-r from-primary/10 via-accent/10 to-purple-500/10 border-y border-border/50\">\n              <div className=\"flex flex-col items-center justify-center text-center\">\n                <TrendingUp size={14} className=\"text-emerald-400 mb-1\" />\n                <div className=\"text-sm font-bold text-foreground\">{lead.karma.toLocaleString()}</div>\n                <div className=\"text-[9px] text-muted-foreground uppercase tracking-wide\">Karma</div>\n              </div>\n              <div className=\"flex flex-col items-center justify-center text-center border-l border-border/30\">\n                <FileText size={14} className=\"text-sky-400 mb-1\" />\n                <div className=\"text-sm font-bold text-foreground\">{stats.postsPerDay}</div>\n                <div className=\"text-[9px] text-muted-foreground uppercase tracking-wide\">Posts/Day</div>\n              </div>\n              <div className=\"flex flex-col items-center justify-center text-center border-l border-border/30\">\n                <ThumbsUp size={14} className=\"text-rose-400 mb-1\" />\n                <div className=\"text-sm font-bold text-foreground\">{stats.avgUpvotes}</div>\n                <div className=\"text-[9px] text-muted-foreground uppercase tracking-wide\">Avg Upvotes</div>\n              </div>\n              <div className=\"flex flex-col items-center justify-center text-center border-l border-border/30\">\n                <Clock size={14} className=\"text-amber-400 mb-1\" />\n                <div className=\"text-sm font-bold text-foreground\">{stats.accountAge}</div>\n                <div className=\"text-[9px] text-muted-foreground uppercase tracking-wide\">Age</div>\n              </div>\n            </div>\n\n            {/* Indicator Badges Row */}\n            <div className=\"grid grid-cols-4 gap-2 p-3 bg-secondary/20\">\n              <div className={`rounded-lg p-2 text-center ${\n                linkAnalysis.hasOF \n                  ? linkAnalysis.bioIndicatesOF \n                    ? 'bg-amber-500/20 border border-amber-500/40' \n                    : 'bg-sky-500/20 border border-sky-500/40' \n                  : 'bg-muted/30'\n              }`}>\n                <div className=\"text-lg\">üî•</div>\n                <div className={`text-[10px] font-medium ${\n                  linkAnalysis.hasOF \n                    ? linkAnalysis.bioIndicatesOF ? 'text-amber-400' : 'text-sky-400' \n                    : 'text-muted-foreground'\n                }`}>\n                  {linkAnalysis.hasOF ? linkAnalysis.bioIndicatesOF ? 'OF Likely' : 'OF Found' : 'No OF'}\n                </div>\n              </div>\n              \n              <div className={`rounded-lg p-2 text-center ${\n                linkAnalysis.hasTracking \n                  ? 'bg-amber-500/20 border border-amber-500/40' \n                  : linkAnalysis.hasOF ? 'bg-emerald-500/20 border border-emerald-500/40' : 'bg-muted/30'\n              }`}>\n                <div className=\"text-lg\">{linkAnalysis.hasTracking ? 'üè∑Ô∏è' : linkAnalysis.hasOF ? '‚úì' : '‚Äî'}</div>\n                <div className={`text-[10px] font-medium ${\n                  linkAnalysis.hasTracking ? 'text-amber-400' : linkAnalysis.hasOF ? 'text-emerald-400' : 'text-muted-foreground'\n                }`}>\n                  {linkAnalysis.hasTracking ? 'Agency?' : linkAnalysis.hasOF ? 'No Track' : '‚Äî'}\n                </div>\n              </div>\n              \n              <div className={`rounded-lg p-2 text-center ${linkAnalysis.hasLinktree ? 'bg-emerald-500/20 border border-emerald-500/40' : 'bg-muted/30'}`}>\n                <div className=\"text-lg\">üå≥</div>\n                <div className={`text-[10px] font-medium ${linkAnalysis.hasLinktree ? 'text-emerald-400' : 'text-muted-foreground'}`}>\n                  {linkAnalysis.hasLinktree ? 'Linktree' : 'No Link'}\n                </div>\n              </div>\n              \n              <div className={`rounded-lg p-2 text-center ${linkAnalysis.hasSocials ? 'bg-purple-500/20 border border-purple-500/40' : 'bg-muted/30'}`}>\n                <div className=\"text-lg\">üì±</div>\n                <div className={`text-[10px] font-medium ${linkAnalysis.hasSocials ? 'text-purple-400' : 'text-muted-foreground'}`}>\n                  {linkAnalysis.hasSocials ? `${linkAnalysis.socialLinks.length} Social` : 'None'}\n                </div>\n              </div>\n            </div>\n\n            {/* User Info Section */}\n            <div className=\"p-4 space-y-3\">\n              {/* Header with avatar and username */}\n              <div className=\"flex items-center gap-3\">\n                {lead.avatar_url ? (\n                  <img\n                    src={lead.avatar_url}\n                    alt={lead.reddit_username}\n                    className=\"w-12 h-12 rounded-full object-cover border-2 border-primary/30\"\n                  />\n                ) : (\n                  <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center text-xl font-bold text-white\">\n                    {lead.reddit_username.charAt(0).toUpperCase()}\n                  </div>\n                )}\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <h2 className=\"text-lg font-bold text-foreground truncate\">\n                      u/{lead.reddit_username}\n                    </h2>\n                    <a\n                      href={lead.profile_url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-muted-foreground hover:text-accent transition-colors\"\n                    >\n                      <ExternalLink size={14} />\n                    </a>\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    {lead.total_posts} total posts\n                  </div>\n                </div>\n              </div>\n\n              {/* Bio */}\n              {lead.bio && (\n                <p className=\"text-sm text-muted-foreground bg-secondary/30 rounded-lg p-3\">\n                  {lead.bio}\n                </p>\n              )}\n\n              {/* Quick Action Links */}\n              <div className=\"flex flex-wrap gap-2\">\n                {/* OnlyFans Button - or Check Bio for Links if no OF found */}\n                {linkAnalysis.ofLinks.length > 0 ? (\n                  <a\n                    href={linkAnalysis.ofLinks[0]}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={`flex items-center gap-2 px-4 py-2.5 rounded-lg font-medium transition-colors shadow-lg text-sm ${\n                      linkAnalysis.bioIndicatesOF \n                        ? 'bg-amber-500 text-white hover:bg-amber-600 shadow-amber-500/20' \n                        : 'bg-sky-500 text-white hover:bg-sky-600 shadow-sky-500/20'\n                    }`}\n                  >\n                    üî• {linkAnalysis.bioIndicatesOF ? 'Check OnlyFans' : 'View OnlyFans'}\n                    <ExternalLink size={14} />\n                  </a>\n                ) : (\n                  // No OF link found - show button to check their bio/profile for links\n                  <a\n                    href={lead.profile_url}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg font-medium hover:from-pink-600 hover:to-rose-600 transition-colors shadow-lg shadow-pink-500/20 text-sm\"\n                  >\n                    üîç Check Bio for Links\n                    <ExternalLink size={14} />\n                  </a>\n                )}\n\n                {/* Linktree Button */}\n                {linkAnalysis.linktreeLinks.length > 0 && (\n                  <a\n                    href={linkAnalysis.linktreeLinks[0]}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"flex items-center gap-2 px-4 py-2 bg-emerald-500/20 text-emerald-400 border border-emerald-500/40 rounded-lg font-medium hover:bg-emerald-500/30 transition-colors text-sm\"\n                  >\n                    üå≥ Linktree\n                    <ExternalLink size={12} />\n                  </a>\n                )}\n\n                {/* Reddit Profile - only show if we have an OF link (otherwise the \"Check Bio\" button covers this) */}\n                {linkAnalysis.ofLinks.length > 0 && (\n                  <a\n                    href={lead.profile_url}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"flex items-center gap-2 px-4 py-2 bg-orange-500/20 text-orange-400 border border-orange-500/40 rounded-lg font-medium hover:bg-orange-500/30 transition-colors text-sm\"\n                  >\n                    Reddit Profile\n                    <ExternalLink size={12} />\n                  </a>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Action buttons */}\n          <div \n            className=\"flex items-center justify-center gap-4 p-4 bg-card border-t border-border\"\n            onPointerDownCapture={(e) => e.stopPropagation()}\n          >\n            <button\n              onClick={() => handleButtonSwipe(\"left\")}\n              className=\"w-14 h-14 rounded-full bg-destructive/10 border-2 border-destructive text-destructive flex items-center justify-center hover:bg-destructive hover:text-white transition-all btn-glow-red\"\n              title=\"Reject (‚Üê or A)\"\n            >\n              <X size={24} strokeWidth={3} />\n            </button>\n            \n            {/* Super Like button */}\n            {onSuperLike && (\n              <button\n                onClick={handleSuperLike}\n                className=\"w-12 h-12 rounded-full bg-amber-500/10 border-2 border-amber-500 text-amber-500 flex items-center justify-center hover:bg-amber-500 hover:text-white transition-all shadow-lg shadow-amber-500/20\"\n                title=\"Super Like (‚Üë or S)\"\n              >\n                <Star size={20} strokeWidth={2.5} fill=\"currentColor\" />\n              </button>\n            )}\n            \n            <button\n              onClick={() => handleButtonSwipe(\"right\")}\n              className=\"w-14 h-14 rounded-full bg-success/10 border-2 border-success text-success flex items-center justify-center hover:bg-success hover:text-white transition-all btn-glow-green\"\n              title=\"Approve (‚Üí or D)\"\n            >\n              <Heart size={24} strokeWidth={2.5} fill=\"currentColor\" />\n            </button>\n          </div>\n        </motion.div>\n      </motion.div>\n\n      {/* Lightbox for image preview */}\n      <AnimatePresence>\n        {lightboxIndex !== null && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 z-50 bg-black/95 flex items-center justify-center\"\n            onClick={() => setLightboxIndex(null)}\n          >\n            {/* Close button */}\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                setLightboxIndex(null);\n              }}\n              className=\"absolute top-4 right-4 z-10 p-3 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\n            >\n              <X size={28} className=\"text-white\" />\n            </button>\n\n            {/* Image counter */}\n            <div className=\"absolute top-4 left-4 text-white/80 text-sm font-medium bg-black/40 px-3 py-1 rounded-full\">\n              {lightboxIndex + 1} / {mediaUrls.length}\n            </div>\n\n            {/* Navigation arrows */}\n            {lightboxIndex > 0 && (\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setLightboxIndex(lightboxIndex - 1);\n                }}\n                className=\"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\n              >\n                <ChevronLeft size={32} className=\"text-white\" />\n              </button>\n            )}\n            {lightboxIndex < mediaUrls.length - 1 && (\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setLightboxIndex(lightboxIndex + 1);\n                }}\n                className=\"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\n              >\n                <ChevronRight size={32} className=\"text-white\" />\n              </button>\n            )}\n\n            {/* Main image */}\n            <motion.img\n              key={lightboxIndex}\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              src={mediaUrls[lightboxIndex]}\n              alt={`Full preview ${lightboxIndex + 1}`}\n              className=\"max-h-[90vh] max-w-[90vw] object-contain rounded-lg\"\n              onClick={(e) => e.stopPropagation()}\n            />\n\n            {/* Keyboard hint */}\n            <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 text-white/60 text-xs flex items-center gap-4\">\n              <span>‚Üê ‚Üí Navigate</span>\n              <span>ESC Close</span>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1405, "column": 0}, "map": {"version":3,"sources":["file:///Users/calummelling/Desktop/redditscraper/frontend/src/components/StatsBar.tsx"],"sourcesContent":["\"use client\";\n\nimport { Users, CheckCircle, XCircle, Clock, Star } from \"lucide-react\";\nimport type { Stats } from \"@/lib/supabase\";\n\ninterface StatsBarProps {\n  stats: Stats;\n  currentFilter: string;\n  onFilterChange: (filter: string) => void;\n}\n\nexport function StatsBar({ stats, currentFilter, onFilterChange }: StatsBarProps) {\n  const filters = [\n    {\n      id: \"pending\",\n      label: \"Pending\",\n      count: stats.pending_leads,\n      icon: Clock,\n      color: \"text-yellow-500\",\n      bgColor: \"bg-yellow-500/10\",\n      borderColor: \"border-yellow-500/30\",\n    },\n    {\n      id: \"superliked\",\n      label: \"Super\",\n      count: stats.superliked_leads,\n      icon: Star,\n      color: \"text-amber-500\",\n      bgColor: \"bg-amber-500/10\",\n      borderColor: \"border-amber-500/30\",\n    },\n    {\n      id: \"approved\",\n      label: \"Approved\",\n      count: stats.approved_leads,\n      icon: CheckCircle,\n      color: \"text-success\",\n      bgColor: \"bg-success/10\",\n      borderColor: \"border-success/30\",\n    },\n    {\n      id: \"rejected\",\n      label: \"Rejected\",\n      count: stats.rejected_leads,\n      icon: XCircle,\n      color: \"text-destructive\",\n      bgColor: \"bg-destructive/10\",\n      borderColor: \"border-destructive/30\",\n    },\n  ];\n\n  return (\n    <div className=\"glass rounded-2xl p-4 mb-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center gap-2\">\n          <Users className=\"text-primary\" size={20} />\n          <span className=\"text-lg font-semibold\">\n            {stats.total_leads.toLocaleString()} Total Leads\n          </span>\n        </div>\n        <div className=\"text-sm text-muted-foreground\">\n          {stats.total_posts.toLocaleString()} posts from{\" \"}\n          {stats.total_subreddits} subreddits\n        </div>\n      </div>\n\n      <div className=\"flex gap-3\">\n        {filters.map((filter) => (\n          <button\n            key={filter.id}\n            onClick={() => onFilterChange(filter.id)}\n            className={`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border transition-all ${\n              currentFilter === filter.id\n                ? `${filter.bgColor} ${filter.borderColor} ${filter.color}`\n                : \"bg-secondary/50 border-border text-muted-foreground hover:bg-secondary\"\n            }`}\n          >\n            <filter.icon size={18} />\n            <span className=\"font-medium\">{filter.label}</span>\n            <span\n              className={`px-2 py-0.5 rounded-full text-xs font-bold ${\n                currentFilter === filter.id\n                  ? `${filter.bgColor} ${filter.color}`\n                  : \"bg-muted text-muted-foreground\"\n              }`}\n            >\n              {filter.count}\n            </span>\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAWO,SAAS,SAAS,EAAE,KAAK,EAAE,aAAa,EAAE,cAAc,EAAiB;IAC9E,MAAM,UAAU;QACd;YACE,IAAI;YACJ,OAAO;YACP,OAAO,MAAM,aAAa;YAC1B,MAAM,wPAAK;YACX,OAAO;YACP,SAAS;YACT,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO,MAAM,gBAAgB;YAC7B,MAAM,qPAAI;YACV,OAAO;YACP,SAAS;YACT,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO,MAAM,cAAc;YAC3B,MAAM,qRAAW;YACjB,OAAO;YACP,SAAS;YACT,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO,MAAM,cAAc;YAC3B,MAAM,kQAAO;YACb,OAAO;YACP,SAAS;YACT,aAAa;QACf;KACD;IAED,qBACE,qOAAC;QAAI,WAAU;;0BACb,qOAAC;gBAAI,WAAU;;kCACb,qOAAC;wBAAI,WAAU;;0CACb,qOAAC,wPAAK;gCAAC,WAAU;gCAAe,MAAM;;;;;;0CACtC,qOAAC;gCAAK,WAAU;;oCACb,MAAM,WAAW,CAAC,cAAc;oCAAG;;;;;;;;;;;;;kCAGxC,qOAAC;wBAAI,WAAU;;4BACZ,MAAM,WAAW,CAAC,cAAc;4BAAG;4BAAY;4BAC/C,MAAM,gBAAgB;4BAAC;;;;;;;;;;;;;0BAI5B,qOAAC;gBAAI,WAAU;0BACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,qOAAC;wBAEC,SAAS,IAAM,eAAe,OAAO,EAAE;wBACvC,WAAW,CAAC,yFAAyF,EACnG,kBAAkB,OAAO,EAAE,GACvB,GAAG,OAAO,OAAO,CAAC,CAAC,EAAE,OAAO,WAAW,CAAC,CAAC,EAAE,OAAO,KAAK,EAAE,GACzD,0EACJ;;0CAEF,qOAAC,OAAO,IAAI;gCAAC,MAAM;;;;;;0CACnB,qOAAC;gCAAK,WAAU;0CAAe,OAAO,KAAK;;;;;;0CAC3C,qOAAC;gCACC,WAAW,CAAC,2CAA2C,EACrD,kBAAkB,OAAO,EAAE,GACvB,GAAG,OAAO,OAAO,CAAC,CAAC,EAAE,OAAO,KAAK,EAAE,GACnC,kCACJ;0CAED,OAAO,KAAK;;;;;;;uBAjBV,OAAO,EAAE;;;;;;;;;;;;;;;;AAwB1B;KAlFgB"}},
    {"offset": {"line": 1568, "column": 0}, "map": {"version":3,"sources":["file:///Users/calummelling/Desktop/redditscraper/frontend/src/components/LeadsList.tsx"],"sourcesContent":["\"use client\";\n\nimport { ExternalLink, RotateCcw, ArrowLeft } from \"lucide-react\";\nimport type { RedditLead } from \"@/lib/supabase\";\n\ninterface LeadsListProps {\n  leads: RedditLead[];\n  onRestore?: (leadId: string) => void;\n  showRestore?: boolean;\n  onBack?: () => void;\n  title?: string;\n}\n\nexport function LeadsList({ leads, onRestore, showRestore = false, onBack, title }: LeadsListProps) {\n  return (\n    <div className=\"space-y-4\">\n      {/* Header with back button */}\n      {onBack && (\n        <div className=\"flex items-center gap-3 pb-2 border-b border-border\">\n          <button\n            onClick={onBack}\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-secondary hover:bg-secondary/80 text-foreground transition-colors\"\n          >\n            <ArrowLeft size={18} />\n            <span>Back to Swiper</span>\n          </button>\n          {title && (\n            <h2 className=\"text-lg font-semibold text-foreground\">{title}</h2>\n          )}\n        </div>\n      )}\n\n      {leads.length === 0 ? (\n        <div className=\"text-center py-12 text-muted-foreground\">\n          <p>No leads in this category</p>\n        </div>\n      ) : (\n        <div className=\"space-y-3 max-h-[60vh] overflow-y-auto pr-2\">\n      {leads.map((lead) => (\n        <div\n          key={lead.id}\n          className=\"bg-card rounded-xl p-4 flex items-center gap-4 hover:bg-card/80 transition-colors\"\n        >\n          {/* Avatar */}\n          {lead.avatar_url ? (\n            <img\n              src={lead.avatar_url}\n              alt={lead.reddit_username}\n              className=\"w-12 h-12 rounded-full object-cover border border-border\"\n            />\n          ) : (\n            <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center text-lg font-bold text-white\">\n              {lead.reddit_username.charAt(0).toUpperCase()}\n            </div>\n          )}\n\n          {/* Info */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"font-medium text-foreground truncate\">\n                u/{lead.reddit_username}\n              </span>\n              <a\n                href={lead.profile_url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-muted-foreground hover:text-accent\"\n              >\n                <ExternalLink size={14} />\n              </a>\n            </div>\n            <div className=\"flex items-center gap-3 text-xs text-muted-foreground mt-1\">\n              <span>‚Üë {lead.karma.toLocaleString()}</span>\n              <span>{lead.total_posts} posts</span>\n              {lead.extracted_links.length > 0 && (\n                <span className=\"text-accent\">\n                  {lead.extracted_links.length} links\n                </span>\n              )}\n            </div>\n          </div>\n\n          {/* Links preview */}\n          {lead.extracted_links.length > 0 && (\n            <div className=\"hidden md:flex gap-1\">\n              {lead.extracted_links.slice(0, 2).map((link, idx) => (\n                <a\n                  key={idx}\n                  href={link}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"px-2 py-1 rounded-full bg-accent/10 text-accent text-xs hover:bg-accent/20 transition-colors\"\n                >\n                  {link.includes(\"onlyfans\") ? \"üî• OF\" : \"üîó Link\"}\n                </a>\n              ))}\n            </div>\n          )}\n\n          {/* Restore button */}\n          {showRestore && onRestore && (\n            <button\n              onClick={() => onRestore(lead.id)}\n              className=\"p-2 rounded-lg bg-secondary hover:bg-secondary/80 text-muted-foreground hover:text-foreground transition-colors\"\n              title=\"Move back to pending\"\n            >\n              <RotateCcw size={16} />\n            </button>\n          )}\n        </div>\n      ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAFA;;;AAaO,SAAS,UAAU,EAAE,KAAK,EAAE,SAAS,EAAE,cAAc,KAAK,EAAE,MAAM,EAAE,KAAK,EAAkB;IAChG,qBACE,qOAAC;QAAI,WAAU;;YAEZ,wBACC,qOAAC;gBAAI,WAAU;;kCACb,qOAAC;wBACC,SAAS;wBACT,WAAU;;0CAEV,qOAAC,wQAAS;gCAAC,MAAM;;;;;;0CACjB,qOAAC;0CAAK;;;;;;;;;;;;oBAEP,uBACC,qOAAC;wBAAG,WAAU;kCAAyC;;;;;;;;;;;;YAK5D,MAAM,MAAM,KAAK,kBAChB,qOAAC;gBAAI,WAAU;0BACb,cAAA,qOAAC;8BAAE;;;;;;;;;;qCAGL,qOAAC;gBAAI,WAAU;0BAChB,MAAM,GAAG,CAAC,CAAC,qBACV,qOAAC;wBAEC,WAAU;;4BAGT,KAAK,UAAU,iBACd,qOAAC;gCACC,KAAK,KAAK,UAAU;gCACpB,KAAK,KAAK,eAAe;gCACzB,WAAU;;;;;qDAGZ,qOAAC;gCAAI,WAAU;0CACZ,KAAK,eAAe,CAAC,MAAM,CAAC,GAAG,WAAW;;;;;;0CAK/C,qOAAC;gCAAI,WAAU;;kDACb,qOAAC;wCAAI,WAAU;;0DACb,qOAAC;gDAAK,WAAU;;oDAAuC;oDAClD,KAAK,eAAe;;;;;;;0DAEzB,qOAAC;gDACC,MAAM,KAAK,WAAW;gDACtB,QAAO;gDACP,KAAI;gDACJ,WAAU;0DAEV,cAAA,qOAAC,iRAAY;oDAAC,MAAM;;;;;;;;;;;;;;;;;kDAGxB,qOAAC;wCAAI,WAAU;;0DACb,qOAAC;;oDAAK;oDAAG,KAAK,KAAK,CAAC,cAAc;;;;;;;0DAClC,qOAAC;;oDAAM,KAAK,WAAW;oDAAC;;;;;;;4CACvB,KAAK,eAAe,CAAC,MAAM,GAAG,mBAC7B,qOAAC;gDAAK,WAAU;;oDACb,KAAK,eAAe,CAAC,MAAM;oDAAC;;;;;;;;;;;;;;;;;;;4BAOpC,KAAK,eAAe,CAAC,MAAM,GAAG,mBAC7B,qOAAC;gCAAI,WAAU;0CACZ,KAAK,eAAe,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,MAAM,oBAC3C,qOAAC;wCAEC,MAAM;wCACN,QAAO;wCACP,KAAI;wCACJ,WAAU;kDAET,KAAK,QAAQ,CAAC,cAAc,UAAU;uCANlC;;;;;;;;;;4BAaZ,eAAe,2BACd,qOAAC;gCACC,SAAS,IAAM,UAAU,KAAK,EAAE;gCAChC,WAAU;gCACV,OAAM;0CAEN,cAAA,qOAAC,wQAAS;oCAAC,MAAM;;;;;;;;;;;;uBAlEhB,KAAK,EAAE;;;;;;;;;;;;;;;;AA2EtB;KAtGgB"}},
    {"offset": {"line": 1806, "column": 0}, "map": {"version":3,"sources":["file:///Users/calummelling/Desktop/redditscraper/frontend/src/components/SubredditSelector.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { ChevronDown, X, Layers } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport type { Subreddit } from \"@/lib/supabase\";\n\ninterface SubredditSelectorProps {\n  subreddits: Subreddit[];\n  selectedSubreddit: Subreddit | null;\n  onSelect: (subreddit: Subreddit | null) => void;\n  pendingCounts?: Record<string, number>;\n}\n\nexport function SubredditSelector({\n  subreddits,\n  selectedSubreddit,\n  onSelect,\n  pendingCounts = {},\n}: SubredditSelectorProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  // Filter subreddits by search\n  const filteredSubreddits = subreddits.filter((sub) =>\n    sub.name.toLowerCase().includes(search.toLowerCase())\n  );\n\n  // Sort by pending count (highest first)\n  const sortedSubreddits = [...filteredSubreddits].sort((a, b) => {\n    const countA = pendingCounts[a.id] || 0;\n    const countB = pendingCounts[b.id] || 0;\n    return countB - countA;\n  });\n\n  return (\n    <div className=\"relative\" ref={dropdownRef}>\n      {/* Trigger button */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className={`flex items-center gap-2 px-4 py-2.5 rounded-xl border transition-all ${\n          selectedSubreddit\n            ? \"bg-primary/10 border-primary/30 text-primary\"\n            : \"bg-secondary border-border hover:border-primary/30\"\n        }`}\n      >\n        <Layers size={16} />\n        <span className=\"font-medium\">\n          {selectedSubreddit ? `r/${selectedSubreddit.name}` : \"All Subreddits\"}\n        </span>\n        <ChevronDown\n          size={16}\n          className={`transition-transform ${isOpen ? \"rotate-180\" : \"\"}`}\n        />\n      </button>\n\n      {/* Clear selection button */}\n      {selectedSubreddit && (\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            onSelect(null);\n          }}\n          className=\"absolute -right-2 -top-2 p-1 rounded-full bg-destructive text-white hover:bg-destructive/80 transition-colors\"\n        >\n          <X size={12} />\n        </button>\n      )}\n\n      {/* Dropdown */}\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            className=\"absolute top-full left-0 mt-2 w-72 bg-card border border-border rounded-xl shadow-xl z-50 overflow-hidden\"\n          >\n            {/* Search input */}\n            <div className=\"p-3 border-b border-border\">\n              <input\n                type=\"text\"\n                placeholder=\"Search subreddits...\"\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n                className=\"w-full px-3 py-2 bg-secondary rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/50\"\n                autoFocus\n              />\n            </div>\n\n            {/* Options list */}\n            <div className=\"max-h-64 overflow-y-auto\">\n              {/* All subreddits option */}\n              <button\n                onClick={() => {\n                  onSelect(null);\n                  setIsOpen(false);\n                  setSearch(\"\");\n                }}\n                className={`w-full px-4 py-3 text-left hover:bg-secondary/50 transition-colors flex items-center justify-between ${\n                  !selectedSubreddit ? \"bg-primary/10\" : \"\"\n                }`}\n              >\n                <span className=\"font-medium\">All Subreddits</span>\n                <span className=\"text-xs text-muted-foreground\">\n                  {Object.values(pendingCounts).reduce((a, b) => a + b, 0)} pending\n                </span>\n              </button>\n\n              {/* Divider */}\n              <div className=\"border-t border-border\" />\n\n              {/* Subreddit options */}\n              {sortedSubreddits.map((sub) => {\n                const count = pendingCounts[sub.id] || 0;\n                return (\n                  <button\n                    key={sub.id}\n                    onClick={() => {\n                      onSelect(sub);\n                      setIsOpen(false);\n                      setSearch(\"\");\n                    }}\n                    className={`w-full px-4 py-3 text-left hover:bg-secondary/50 transition-colors flex items-center justify-between ${\n                      selectedSubreddit?.id === sub.id ? \"bg-primary/10\" : \"\"\n                    }`}\n                  >\n                    <div>\n                      <span className=\"font-medium\">r/{sub.name}</span>\n                      {sub.subscribers > 0 && (\n                        <span className=\"text-xs text-muted-foreground ml-2\">\n                          {sub.subscribers.toLocaleString()} members\n                        </span>\n                      )}\n                    </div>\n                    {count > 0 && (\n                      <span className=\"px-2 py-0.5 bg-amber-500/20 text-amber-400 rounded-full text-xs font-medium\">\n                        {count}\n                      </span>\n                    )}\n                  </button>\n                );\n              })}\n\n              {sortedSubreddits.length === 0 && (\n                <div className=\"px-4 py-6 text-center text-muted-foreground text-sm\">\n                  No subreddits found\n                </div>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AAAA;;;AAJA;;;;AAcO,SAAS,kBAAkB,EAChC,UAAU,EACV,iBAAiB,EACjB,QAAQ,EACR,gBAAgB,CAAC,CAAC,EACK;;IACvB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,cAAc,IAAA,+MAAM,EAAiB;IAE3C,uCAAuC;IACvC,IAAA,kNAAS;uCAAC;YACR,SAAS,mBAAmB,KAAiB;gBAC3C,IAAI,YAAY,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;oBAC9E,UAAU;gBACZ;YACF;YACA,SAAS,gBAAgB,CAAC,aAAa;YACvC;+CAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;;QACzD;sCAAG,EAAE;IAEL,8BAA8B;IAC9B,MAAM,qBAAqB,WAAW,MAAM,CAAC,CAAC,MAC5C,IAAI,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW;IAGpD,wCAAwC;IACxC,MAAM,mBAAmB;WAAI;KAAmB,CAAC,IAAI,CAAC,CAAC,GAAG;QACxD,MAAM,SAAS,aAAa,CAAC,EAAE,EAAE,CAAC,IAAI;QACtC,MAAM,SAAS,aAAa,CAAC,EAAE,EAAE,CAAC,IAAI;QACtC,OAAO,SAAS;IAClB;IAEA,qBACE,qOAAC;QAAI,WAAU;QAAW,KAAK;;0BAE7B,qOAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAW,CAAC,qEAAqE,EAC/E,oBACI,iDACA,sDACJ;;kCAEF,qOAAC,2PAAM;wBAAC,MAAM;;;;;;kCACd,qOAAC;wBAAK,WAAU;kCACb,oBAAoB,CAAC,EAAE,EAAE,kBAAkB,IAAI,EAAE,GAAG;;;;;;kCAEvD,qOAAC,8QAAW;wBACV,MAAM;wBACN,WAAW,CAAC,qBAAqB,EAAE,SAAS,eAAe,IAAI;;;;;;;;;;;;YAKlE,mCACC,qOAAC;gBACC,SAAS,CAAC;oBACR,EAAE,eAAe;oBACjB,SAAS;gBACX;gBACA,WAAU;0BAEV,cAAA,qOAAC,4OAAC;oBAAC,MAAM;;;;;;;;;;;0BAKb,qOAAC,uPAAe;0BACb,wBACC,qOAAC,+OAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAG;oBAC9B,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAE;oBAC5B,MAAM;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAG;oBAC3B,WAAU;;sCAGV,qOAAC;4BAAI,WAAU;sCACb,cAAA,qOAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;gCACzC,WAAU;gCACV,SAAS;;;;;;;;;;;sCAKb,qOAAC;4BAAI,WAAU;;8CAEb,qOAAC;oCACC,SAAS;wCACP,SAAS;wCACT,UAAU;wCACV,UAAU;oCACZ;oCACA,WAAW,CAAC,qGAAqG,EAC/G,CAAC,oBAAoB,kBAAkB,IACvC;;sDAEF,qOAAC;4CAAK,WAAU;sDAAc;;;;;;sDAC9B,qOAAC;4CAAK,WAAU;;gDACb,OAAO,MAAM,CAAC,eAAe,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,GAAG;gDAAG;;;;;;;;;;;;;8CAK7D,qOAAC;oCAAI,WAAU;;;;;;gCAGd,iBAAiB,GAAG,CAAC,CAAC;oCACrB,MAAM,QAAQ,aAAa,CAAC,IAAI,EAAE,CAAC,IAAI;oCACvC,qBACE,qOAAC;wCAEC,SAAS;4CACP,SAAS;4CACT,UAAU;4CACV,UAAU;wCACZ;wCACA,WAAW,CAAC,qGAAqG,EAC/G,mBAAmB,OAAO,IAAI,EAAE,GAAG,kBAAkB,IACrD;;0DAEF,qOAAC;;kEACC,qOAAC;wDAAK,WAAU;;4DAAc;4DAAG,IAAI,IAAI;;;;;;;oDACxC,IAAI,WAAW,GAAG,mBACjB,qOAAC;wDAAK,WAAU;;4DACb,IAAI,WAAW,CAAC,cAAc;4DAAG;;;;;;;;;;;;;4CAIvC,QAAQ,mBACP,qOAAC;gDAAK,WAAU;0DACb;;;;;;;uCApBA,IAAI,EAAE;;;;;gCAyBjB;gCAEC,iBAAiB,MAAM,KAAK,mBAC3B,qOAAC;oCAAI,WAAU;8CAAsD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUrF;GAzJgB;KAAA"}},
    {"offset": {"line": 2083, "column": 0}, "map": {"version":3,"sources":["file:///Users/calummelling/Desktop/redditscraper/frontend/src/components/KeywordManager.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  Search,\n  Plus,\n  X,\n  Loader2,\n  CheckCircle,\n  Clock,\n  AlertCircle,\n  Trash2,\n  Play,\n  Settings,\n  ChevronDown,\n  ChevronUp,\n} from \"lucide-react\";\nimport {\n  getSearchKeywords,\n  getScrapeJobs,\n  addKeywordAndScrape,\n  toggleKeywordActive,\n  deleteKeyword,\n  queueScrapeJob,\n  type SearchKeyword,\n  type ScrapeJob,\n} from \"@/lib/supabase\";\n\ninterface KeywordManagerProps {\n  onJobQueued?: () => void;\n}\n\nexport function KeywordManager({ onJobQueued }: KeywordManagerProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [keywords, setKeywords] = useState<SearchKeyword[]>([]);\n  const [jobs, setJobs] = useState<ScrapeJob[]>([]);\n  const [newKeyword, setNewKeyword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [isAdding, setIsAdding] = useState(false);\n  const [showJobs, setShowJobs] = useState(false);\n\n  // Fetch data\n  const fetchData = async () => {\n    setIsLoading(true);\n    const [keywordsData, jobsData] = await Promise.all([\n      getSearchKeywords(),\n      getScrapeJobs(10),\n    ]);\n    setKeywords(keywordsData);\n    setJobs(jobsData);\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchData();\n    }\n  }, [isOpen]);\n\n  // Poll for job updates when panel is open\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const interval = setInterval(() => {\n      getScrapeJobs(10).then(setJobs);\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, [isOpen]);\n\n  // Add new keyword and queue scrape\n  const handleAddKeyword = async () => {\n    if (!newKeyword.trim()) return;\n\n    setIsAdding(true);\n    const result = await addKeywordAndScrape(newKeyword.trim());\n    \n    if (result.keyword) {\n      setKeywords((prev) => [result.keyword!, ...prev]);\n    }\n    if (result.job) {\n      setJobs((prev) => [result.job!, ...prev]);\n      onJobQueued?.();\n    }\n    \n    setNewKeyword(\"\");\n    setIsAdding(false);\n  };\n\n  // Queue a scrape for existing keyword\n  const handleScrapeKeyword = async (kw: SearchKeyword) => {\n    const job = await queueScrapeJob(kw.keyword, kw.id, 500);\n    if (job) {\n      setJobs((prev) => [job, ...prev]);\n      onJobQueued?.();\n    }\n  };\n\n  // Toggle keyword active status\n  const handleToggleActive = async (kw: SearchKeyword) => {\n    const success = await toggleKeywordActive(kw.id, !kw.is_active);\n    if (success) {\n      setKeywords((prev) =>\n        prev.map((k) => (k.id === kw.id ? { ...k, is_active: !k.is_active } : k))\n      );\n    }\n  };\n\n  // Delete keyword\n  const handleDelete = async (kw: SearchKeyword) => {\n    if (!confirm(`Delete keyword \"${kw.keyword}\"?`)) return;\n    \n    const success = await deleteKeyword(kw.id);\n    if (success) {\n      setKeywords((prev) => prev.filter((k) => k.id !== kw.id));\n    }\n  };\n\n  // Count pending jobs\n  const pendingJobs = jobs.filter((j) => j.status === \"pending\" || j.status === \"processing\").length;\n\n  const getJobStatusIcon = (status: ScrapeJob[\"status\"]) => {\n    switch (status) {\n      case \"pending\":\n        return <Clock size={14} className=\"text-amber-400\" />;\n      case \"processing\":\n        return <Loader2 size={14} className=\"text-blue-400 animate-spin\" />;\n      case \"completed\":\n        return <CheckCircle size={14} className=\"text-emerald-400\" />;\n      case \"failed\":\n        return <AlertCircle size={14} className=\"text-red-400\" />;\n    }\n  };\n\n  return (\n    <div className=\"relative\">\n      {/* Trigger button */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className={`flex items-center gap-2 px-4 py-2.5 rounded-xl border transition-all ${\n          isOpen\n            ? \"bg-primary text-primary-foreground border-primary\"\n            : \"bg-secondary border-border hover:border-primary/30\"\n        }`}\n      >\n        <Settings size={16} />\n        <span className=\"font-medium\">Keywords</span>\n        {pendingJobs > 0 && (\n          <span className=\"px-2 py-0.5 bg-amber-500 text-white rounded-full text-xs font-bold animate-pulse\">\n            {pendingJobs}\n          </span>\n        )}\n      </button>\n\n      {/* Panel */}\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0, y: -10, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: -10, scale: 0.95 }}\n            className=\"absolute top-full right-0 mt-2 w-96 bg-card border border-border rounded-xl shadow-2xl z-50 overflow-hidden\"\n          >\n            {/* Header */}\n            <div className=\"p-4 border-b border-border bg-secondary/30\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h3 className=\"font-bold text-foreground\">Search Keywords</h3>\n                <button\n                  onClick={() => setIsOpen(false)}\n                  className=\"p-1 rounded-lg hover:bg-secondary transition-colors\"\n                >\n                  <X size={18} />\n                </button>\n              </div>\n\n              {/* Add new keyword */}\n              <div className=\"flex gap-2\">\n                <div className=\"flex-1 relative\">\n                  <Search size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\" />\n                  <input\n                    type=\"text\"\n                    value={newKeyword}\n                    onChange={(e) => setNewKeyword(e.target.value)}\n                    onKeyDown={(e) => e.key === \"Enter\" && handleAddKeyword()}\n                    placeholder=\"Add new keyword...\"\n                    className=\"w-full pl-9 pr-3 py-2 bg-background border border-border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/50\"\n                  />\n                </div>\n                <button\n                  onClick={handleAddKeyword}\n                  disabled={isAdding || !newKeyword.trim()}\n                  className=\"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                >\n                  {isAdding ? (\n                    <Loader2 size={16} className=\"animate-spin\" />\n                  ) : (\n                    <Plus size={16} />\n                  )}\n                  Add & Scrape\n                </button>\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-2\">\n                New keywords are immediately queued for scraping\n              </p>\n            </div>\n\n            {/* Keywords list */}\n            <div className=\"max-h-64 overflow-y-auto\">\n              {isLoading ? (\n                <div className=\"p-8 text-center\">\n                  <Loader2 size={24} className=\"animate-spin mx-auto text-muted-foreground\" />\n                </div>\n              ) : keywords.length === 0 ? (\n                <div className=\"p-8 text-center text-muted-foreground text-sm\">\n                  No keywords yet. Add one above!\n                </div>\n              ) : (\n                <div className=\"divide-y divide-border\">\n                  {keywords.map((kw) => (\n                    <div\n                      key={kw.id}\n                      className={`p-3 flex items-center gap-3 hover:bg-secondary/30 transition-colors ${\n                        !kw.is_active ? \"opacity-50\" : \"\"\n                      }`}\n                    >\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"font-medium text-sm truncate\">{kw.keyword}</div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          Scraped {kw.times_scraped}x\n                          {kw.last_scraped_at && (\n                            <> ¬∑ Last: {new Date(kw.last_scraped_at).toLocaleDateString()}</>\n                          )}\n                        </div>\n                      </div>\n                      \n                      {/* Priority badge */}\n                      <span className={`px-2 py-0.5 rounded text-xs font-medium ${\n                        kw.priority >= 100 ? \"bg-primary/20 text-primary\" : \"bg-secondary text-muted-foreground\"\n                      }`}>\n                        P{kw.priority}\n                      </span>\n\n                      {/* Actions */}\n                      <div className=\"flex items-center gap-1\">\n                        <button\n                          onClick={() => handleScrapeKeyword(kw)}\n                          className=\"p-1.5 rounded-lg hover:bg-primary/20 text-primary transition-colors\"\n                          title=\"Queue scrape\"\n                        >\n                          <Play size={14} />\n                        </button>\n                        <button\n                          onClick={() => handleToggleActive(kw)}\n                          className={`p-1.5 rounded-lg transition-colors ${\n                            kw.is_active\n                              ? \"hover:bg-amber-500/20 text-amber-400\"\n                              : \"hover:bg-emerald-500/20 text-emerald-400\"\n                          }`}\n                          title={kw.is_active ? \"Disable\" : \"Enable\"}\n                        >\n                          {kw.is_active ? <ChevronDown size={14} /> : <ChevronUp size={14} />}\n                        </button>\n                        <button\n                          onClick={() => handleDelete(kw)}\n                          className=\"p-1.5 rounded-lg hover:bg-destructive/20 text-destructive transition-colors\"\n                          title=\"Delete\"\n                        >\n                          <Trash2 size={14} />\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Jobs section */}\n            <div className=\"border-t border-border\">\n              <button\n                onClick={() => setShowJobs(!showJobs)}\n                className=\"w-full p-3 flex items-center justify-between hover:bg-secondary/30 transition-colors\"\n              >\n                <span className=\"text-sm font-medium\">\n                  Recent Jobs {pendingJobs > 0 && `(${pendingJobs} active)`}\n                </span>\n                {showJobs ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\n              </button>\n\n              <AnimatePresence>\n                {showJobs && (\n                  <motion.div\n                    initial={{ height: 0 }}\n                    animate={{ height: \"auto\" }}\n                    exit={{ height: 0 }}\n                    className=\"overflow-hidden\"\n                  >\n                    <div className=\"max-h-48 overflow-y-auto divide-y divide-border/50 bg-secondary/20\">\n                      {jobs.length === 0 ? (\n                        <div className=\"p-4 text-center text-muted-foreground text-sm\">\n                          No scrape jobs yet\n                        </div>\n                      ) : (\n                        jobs.map((job) => (\n                          <div key={job.id} className=\"p-3 flex items-center gap-3\">\n                            {getJobStatusIcon(job.status)}\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"text-sm font-medium truncate\">{job.keyword}</div>\n                              <div className=\"text-xs text-muted-foreground\">\n                                {job.status === \"completed\" ? (\n                                  <>\n                                    {job.subreddits_found} subs ¬∑ {job.leads_found} leads ¬∑ {job.posts_found} posts\n                                  </>\n                                ) : job.status === \"failed\" ? (\n                                  <span className=\"text-red-400\">{job.error_message || \"Failed\"}</span>\n                                ) : (\n                                  new Date(job.created_at).toLocaleTimeString()\n                                )}\n                              </div>\n                            </div>\n                            <span className={`text-xs px-2 py-0.5 rounded-full ${\n                              job.status === \"pending\" ? \"bg-amber-500/20 text-amber-400\" :\n                              job.status === \"processing\" ? \"bg-blue-500/20 text-blue-400\" :\n                              job.status === \"completed\" ? \"bg-emerald-500/20 text-emerald-400\" :\n                              \"bg-red-500/20 text-red-400\"\n                            }`}>\n                              {job.status}\n                            </span>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n            </div>\n\n            {/* Footer */}\n            <div className=\"p-3 border-t border-border bg-secondary/30 text-center\">\n              <p className=\"text-xs text-muted-foreground\">\n                Run <code className=\"bg-background px-1 rounded\">python main.py --jobs</code> to process queue\n              </p>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2762, "column": 0}, "map": {"version":3,"sources":["file:///Users/calummelling/Desktop/redditscraper/frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { RefreshCw, Zap, Undo2 } from \"lucide-react\";\nimport {\n  getPendingLeads,\n  getLeadsByStatus,\n  getLeadsBySubreddit,\n  updateLeadStatus,\n  getStats,\n  getSubreddits,\n  type RedditLead,\n  type Stats,\n  type Subreddit,\n} from \"@/lib/supabase\";\nimport { SwipeCard } from \"@/components/SwipeCard\";\nimport { StatsBar } from \"@/components/StatsBar\";\nimport { LeadsList } from \"@/components/LeadsList\";\nimport { SubredditSelector } from \"@/components/SubredditSelector\";\nimport { KeywordManager } from \"@/components/KeywordManager\";\n\n// History entry for undo\ninterface SwipeHistoryEntry {\n  lead: RedditLead;\n  action: \"approved\" | \"rejected\" | \"superliked\";\n}\n\nexport default function Home() {\n  const [leads, setLeads] = useState<RedditLead[]>([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [swipeHistory, setSwipeHistory] = useState<SwipeHistoryEntry[]>([]);\n  const [stats, setStats] = useState<Stats>({\n    total_leads: 0,\n    total_posts: 0,\n    total_subreddits: 0,\n    pending_leads: 0,\n    approved_leads: 0,\n    rejected_leads: 0,\n    superliked_leads: 0,\n  });\n  const [currentFilter, setCurrentFilter] = useState(\"pending\");\n  const [isLoading, setIsLoading] = useState(true);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  \n  // Subreddit filtering\n  const [subreddits, setSubreddits] = useState<Subreddit[]>([]);\n  const [selectedSubreddit, setSelectedSubreddit] = useState<Subreddit | null>(null);\n  const [subredditPendingCounts, setSubredditPendingCounts] = useState<Record<string, number>>({});\n\n  // Fetch subreddits\n  const fetchSubreddits = useCallback(async () => {\n    try {\n      const data = await getSubreddits();\n      setSubreddits(data);\n      \n      // Calculate pending counts per subreddit\n      const { supabase } = await import(\"@/lib/supabase\");\n      const counts: Record<string, number> = {};\n      \n      for (const sub of data) {\n        const { data: posts } = await supabase\n          .from(\"reddit_posts\")\n          .select(\"lead_id\")\n          .eq(\"subreddit_id\", sub.id);\n        \n        if (posts) {\n          const leadIds = [...new Set(posts.map((p) => p.lead_id))];\n          if (leadIds.length > 0) {\n            const { data: leads } = await supabase\n              .from(\"reddit_leads\")\n              .select(\"id\")\n              .in(\"id\", leadIds)\n              .eq(\"status\", \"pending\");\n            counts[sub.id] = leads?.length || 0;\n          }\n        }\n      }\n      setSubredditPendingCounts(counts);\n    } catch (error) {\n      console.error(\"Error fetching subreddits:\", error);\n    }\n  }, []);\n\n  // Fetch leads based on current filter and selected subreddit\n  const fetchLeads = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      let data: RedditLead[];\n      \n      if (selectedSubreddit) {\n        // Filter by subreddit\n        data = await getLeadsBySubreddit(selectedSubreddit.id, currentFilter, 50);\n      } else if (currentFilter === \"pending\") {\n        data = await getPendingLeads(50);\n      } else {\n        data = await getLeadsByStatus(currentFilter, 50);\n      }\n      \n      setLeads(data);\n      setCurrentIndex(0);\n    } catch (error) {\n      console.error(\"Error fetching leads:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [currentFilter, selectedSubreddit]);\n\n  // Fetch stats\n  const fetchStats = useCallback(async () => {\n    try {\n      const data = await getStats();\n      setStats(data);\n    } catch (error) {\n      console.error(\"Error fetching stats:\", error);\n    }\n  }, []);\n\n  // Initial load\n  useEffect(() => {\n    fetchSubreddits();\n    fetchLeads();\n    fetchStats();\n  }, [fetchSubreddits, fetchLeads, fetchStats]);\n\n  // Keyboard shortcut for undo\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === \"z\" || e.key === \"Z\") {\n        if (currentFilter === \"pending\" && swipeHistory.length > 0) {\n          handleUndo();\n        }\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [currentFilter, swipeHistory.length]);\n\n  // Refetch when filter or subreddit changes\n  useEffect(() => {\n    fetchLeads();\n  }, [currentFilter, selectedSubreddit, fetchLeads]);\n\n  // Handle swipe\n  const handleSwipe = async (direction: \"left\" | \"right\") => {\n    const currentLead = leads[currentIndex];\n    if (!currentLead) return;\n\n    const status = direction === \"right\" ? \"approved\" : \"rejected\";\n\n    // Add to history for undo\n    setSwipeHistory((prev) => [...prev, { lead: currentLead, action: status }]);\n\n    // Optimistic update\n    setLeads((prev) => prev.filter((_, i) => i !== currentIndex));\n    setStats((prev) => ({\n      ...prev,\n      pending_leads: Math.max(0, prev.pending_leads - 1),\n      approved_leads:\n        status === \"approved\" ? prev.approved_leads + 1 : prev.approved_leads,\n      rejected_leads:\n        status === \"rejected\" ? prev.rejected_leads + 1 : prev.rejected_leads,\n    }));\n\n    // Update in database\n    await updateLeadStatus(currentLead.id, status);\n  };\n\n  // Handle super like\n  const handleSuperLike = async () => {\n    const currentLead = leads[currentIndex];\n    if (!currentLead) return;\n\n    // Add to history for undo\n    setSwipeHistory((prev) => [...prev, { lead: currentLead, action: \"superliked\" }]);\n\n    // Optimistic update\n    setLeads((prev) => prev.filter((_, i) => i !== currentIndex));\n    setStats((prev) => ({\n      ...prev,\n      pending_leads: Math.max(0, prev.pending_leads - 1),\n      superliked_leads: prev.superliked_leads + 1,\n    }));\n\n    // Update in database\n    await updateLeadStatus(currentLead.id, \"superliked\");\n  };\n\n  // Handle undo - go back to previous lead\n  const handleUndo = async () => {\n    if (swipeHistory.length === 0) return;\n\n    const lastEntry = swipeHistory[swipeHistory.length - 1];\n    \n    // Remove from history\n    setSwipeHistory((prev) => prev.slice(0, -1));\n\n    // Add lead back to the front of the list\n    setLeads((prev) => [lastEntry.lead, ...prev]);\n    \n    // Update stats\n    setStats((prev) => ({\n      ...prev,\n      pending_leads: prev.pending_leads + 1,\n      approved_leads:\n        lastEntry.action === \"approved\"\n          ? Math.max(0, prev.approved_leads - 1)\n          : prev.approved_leads,\n      rejected_leads:\n        lastEntry.action === \"rejected\"\n          ? Math.max(0, prev.rejected_leads - 1)\n          : prev.rejected_leads,\n      superliked_leads:\n        lastEntry.action === \"superliked\"\n          ? Math.max(0, prev.superliked_leads - 1)\n          : prev.superliked_leads,\n    }));\n\n    // Update in database - set back to pending\n    const { supabase } = await import(\"@/lib/supabase\");\n    await supabase\n      .from(\"reddit_leads\")\n      .update({ status: \"pending\", updated_at: new Date().toISOString() })\n      .eq(\"id\", lastEntry.lead.id);\n  };\n\n  // Handle restore (move back to pending)\n  const handleRestore = async (leadId: string) => {\n    // Find the lead\n    const lead = leads.find((l) => l.id === leadId);\n    if (!lead) return;\n\n    // Optimistic update\n    setLeads((prev) => prev.filter((l) => l.id !== leadId));\n    setStats((prev) => ({\n      ...prev,\n      pending_leads: prev.pending_leads + 1,\n      approved_leads:\n        lead.status === \"approved\"\n          ? Math.max(0, prev.approved_leads - 1)\n          : prev.approved_leads,\n      rejected_leads:\n        lead.status === \"rejected\"\n          ? Math.max(0, prev.rejected_leads - 1)\n          : prev.rejected_leads,\n    }));\n\n    // Update in database - we need to update to pending status\n    // Note: This requires a slight modification to updateLeadStatus to handle \"pending\"\n    // For now, we'll just update the status directly\n    const { supabase } = await import(\"@/lib/supabase\");\n    await supabase\n      .from(\"reddit_leads\")\n      .update({ status: \"pending\", updated_at: new Date().toISOString() })\n      .eq(\"id\", leadId);\n  };\n\n  // Refresh data\n  const handleRefresh = async () => {\n    setIsRefreshing(true);\n    await Promise.all([fetchLeads(), fetchStats(), fetchSubreddits()]);\n    setIsRefreshing(false);\n  };\n\n  const currentLead = leads[currentIndex];\n  const showSwiper = currentFilter === \"pending\";\n\n  return (\n    <main className=\"min-h-screen p-6 md:p-8 max-w-4xl mx-auto\">\n      {/* Header */}\n      <header className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold gradient-text flex items-center gap-2\">\n            <Zap className=\"text-primary\" />\n            Lead Swiper\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Swipe through Reddit leads for your OF agency\n          </p>\n        </div>\n        <button\n          onClick={handleRefresh}\n          disabled={isRefreshing}\n          className=\"p-3 rounded-xl bg-secondary hover:bg-secondary/80 text-foreground transition-all disabled:opacity-50\"\n          title=\"Refresh data\"\n        >\n          <RefreshCw\n            size={20}\n            className={isRefreshing ? \"animate-spin\" : \"\"}\n          />\n        </button>\n      </header>\n\n      {/* Filters row */}\n      <div className=\"flex items-center justify-between gap-4 mb-6\">\n        <div className=\"flex items-center gap-4\">\n          <SubredditSelector\n            subreddits={subreddits}\n            selectedSubreddit={selectedSubreddit}\n            onSelect={(sub) => {\n              setSelectedSubreddit(sub);\n              setSwipeHistory([]); // Clear undo history when switching\n            }}\n            pendingCounts={subredditPendingCounts}\n          />\n          {selectedSubreddit && (\n            <span className=\"text-sm text-muted-foreground\">\n              Filtering leads from r/{selectedSubreddit.name}\n            </span>\n          )}\n        </div>\n        \n        {/* Keyword Manager */}\n        <KeywordManager onJobQueued={() => fetchSubreddits()} />\n      </div>\n\n      {/* Stats bar with filters */}\n      <StatsBar\n        stats={stats}\n        currentFilter={currentFilter}\n        onFilterChange={setCurrentFilter}\n      />\n\n      {/* Main content area */}\n      <div className=\"relative min-h-[600px]\">\n        {isLoading ? (\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"text-center space-y-4\">\n              <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto\" />\n              <p className=\"text-muted-foreground\">Loading leads...</p>\n            </div>\n          </div>\n        ) : showSwiper ? (\n          // Swipe mode for pending leads\n          <>\n            {leads.length > 0 ? (\n              <>\n                {/* Card stack indicator */}\n                <div className=\"text-center mb-4 text-sm text-muted-foreground\">\n                  {currentIndex + 1} of {leads.length} pending leads\n                </div>\n\n                {/* Swipe cards */}\n                <div className=\"relative h-[75vh] min-h-[600px]\">\n                  <AnimatePresence mode=\"popLayout\">\n                    {currentLead && (\n                      <SwipeCard\n                        key={currentLead.id}\n                        lead={currentLead}\n                        onSwipe={handleSwipe}\n                        onSuperLike={handleSuperLike}\n                        isActive={true}\n                      />\n                    )}\n                  </AnimatePresence>\n                </div>\n\n                {/* Keyboard hints and undo button */}\n                <div className=\"flex items-center justify-center gap-4 mt-4\">\n                  {/* Undo button */}\n                  <button\n                    onClick={handleUndo}\n                    disabled={swipeHistory.length === 0}\n                    className=\"flex items-center gap-2 px-4 py-2 rounded-xl bg-secondary hover:bg-secondary/80 text-foreground transition-all disabled:opacity-30 disabled:cursor-not-allowed\"\n                    title=\"Undo last swipe (Z)\"\n                  >\n                    <Undo2 size={16} />\n                    <span className=\"text-sm\">Undo</span>\n                    {swipeHistory.length > 0 && (\n                      <span className=\"text-xs text-muted-foreground\">\n                        ({swipeHistory.length})\n                      </span>\n                    )}\n                  </button>\n                  \n                  {/* Keyboard hints */}\n                  <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\n                    <span className=\"flex items-center gap-1\">\n                      <kbd className=\"px-2 py-1 bg-secondary rounded\">‚Üê</kbd>\n                      Reject\n                    </span>\n                    <span className=\"flex items-center gap-1\">\n                      <kbd className=\"px-2 py-1 bg-amber-500/20 text-amber-400 rounded\">‚Üë</kbd>\n                      <span className=\"text-amber-400\">Super</span>\n                    </span>\n                    <span className=\"flex items-center gap-1\">\n                      <kbd className=\"px-2 py-1 bg-secondary rounded\">‚Üí</kbd>\n                      Approve\n                    </span>\n                    <span className=\"flex items-center gap-1\">\n                      <kbd className=\"px-2 py-1 bg-secondary rounded\">Z</kbd>\n                      Undo\n                    </span>\n                  </div>\n                </div>\n              </>\n            ) : (\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"text-center py-20\"\n              >\n                <div className=\"w-20 h-20 bg-success/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <span className=\"text-4xl\">üéâ</span>\n                </div>\n                <h2 className=\"text-2xl font-bold text-foreground mb-2\">\n                  All caught up!\n                </h2>\n                <p className=\"text-muted-foreground mb-6\">\n                  No more pending leads to review. Run the scraper to find more!\n                </p>\n                <button\n                  onClick={handleRefresh}\n                  className=\"px-6 py-3 bg-primary text-primary-foreground rounded-xl font-medium hover:bg-primary/90 transition-colors\"\n                >\n                  Check for new leads\n                </button>\n              </motion.div>\n            )}\n          </>\n        ) : (\n          // List mode for approved/rejected leads\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"bg-card rounded-2xl p-6\"\n          >\n            <LeadsList\n              leads={leads}\n              onRestore={handleRestore}\n              showRestore={true}\n              onBack={() => setCurrentFilter(\"pending\")}\n              title={`${currentFilter.charAt(0).toUpperCase() + currentFilter.slice(1)} Leads`}\n            />\n          </motion.div>\n        )}\n      </div>\n    </main>\n  );\n}\n\n\n"],"names":[],"mappings":"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"}}]
}